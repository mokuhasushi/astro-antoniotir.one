---
import Hamburger from "./Hamburger.astro"
import Navigation from "./Navigation.astro"
import ThemeIcon from "./ThemeIcon.astro"

---

<header class="header">
    <div class="header__inner">
        <ThemeIcon />
        <a href="/">            
            <div class="logo">
              Antonio Tirone
            </div>
        </a>
        <!-- ugly! yet it works -->
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <span></span>
        <Hamburger />

    </div>
    <nav>
        <Navigation />
    </nav>
    <script>
        // Menu functionality
        (() => {
          const menus = document.querySelectorAll(".menu");
          
          // Close menus when clicking outside
          document.body.addEventListener("click", () => {
            menus.forEach(menu => {
              if (menu.classList.contains("open")) {
                menu.classList.remove("open");
              }
            });
          });
          
          // Close menus on window resize
          window.addEventListener("resize", () => {
            menus.forEach(menu => {
              menu.classList.remove("open");
            });
          });
          
          // Menu trigger functionality
          menus.forEach(menu => {
            const trigger = menu.querySelector(".menu__trigger");
            const dropdown = menu.querySelector(".menu__dropdown");
            
            if (trigger && dropdown) {
              trigger.addEventListener("click", event => {
                event.stopPropagation();
                
                if (menu.classList.contains("open")) {
                  menu.classList.remove("open");
                } else {
                  // Close other menus
                  menus.forEach(m => m.classList.remove("open"));
                  menu.classList.add("open");
                }
              });
              
              dropdown.addEventListener("click", e => e.stopPropagation());
            }
          });
        })();
      </script>
</header>
<!-- <header class="header">
    <div class="header__inner">
      <div class="header__logo">
        <a href={base}>
          <div class="logo">
            Antonio Tirone
          </div>
        </a>
      </div>
    </div> -->
